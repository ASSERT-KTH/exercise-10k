{
  "prompt": "Write a program to check if a given binary tree has any duplicate subtrees.",
  "answer": "Here is a Python solution using a dictionary to store the subtree structures. This solution uses a depth-first search (DFS) to traverse the tree and generate a unique string for each subtree.\n\n```python\nclass Node:\n    def __init__(self, x):\n        self.val = x\n        self.left = None\n        self.right = None\n\nclass Solution:\n    def findDuplicateSubtrees(self, root):\n        count = {}\n        res = []\n        self.dfs(root, count, res)\n        return res\n\n    def dfs(self, root, count, res):\n        if not root:\n            return \"#\"\n        \n        subtree = str(root.val) + \",\" + self.dfs(root.left, count, res) + \",\" + self.dfs(root.right, count, res)\n        \n        count[subtree] = count.get(subtree, 0) + 1\n        \n        if count[subtree] == 2:\n            res.append(root)\n        \n        return subtree\n\n# Helper function to print the tree\ndef print_tree(node, level=0):\n    if node is not None:\n        print_tree(node.right, level + 1)\n        print(' ' * 4 * level + '->', node.val)\n        print_tree(node.left, level + 1)\n\n# Example usage\nif __name__ == \"__main__\":\n    # Constructing the binary tree\n    root = Node(1)\n    root.left = Node(2)\n    root.right = Node(3)\n    root.left.left = Node(4)\n    root.right.left = Node(2)\n    root.right.left.left = Node(4)\n    root.right.right = Node(4)\n\n    solution = Solution()\n    duplicates = solution.findDuplicateSubtrees(root)\n\n    print(\"Duplicate subtrees:\")\n    for i, duplicate in enumerate(duplicates):\n        print(\"Duplicate subtree\", i+1)\n        print_tree(duplicate)\n```\n\nThis program defines a binary tree and a solution class. The `findDuplicateSubtrees` function uses a helper function `dfs` to perform a depth-first search on the tree, generating a unique string for each subtree and counting the occurrences of each subtree. If a subtree is encountered for the second time, it is added to the result list. The program then constructs an example binary tree, finds the duplicate subtrees, and prints them.",
  "timestamp": "2026-02-12T02:12:29.601576",
  "model": "RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic"
}