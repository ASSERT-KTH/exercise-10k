{
  "prompt": "Write a program that writes output to a network connection.",
  "answer": "**Network Writer Program**\n==========================\n\nBelow is an example of a Python program that writes output to a network connection using the TCP protocol.\n\n### Dependencies\n\n* `socket` library (built-in with Python)\n\n### Code\n```python\nimport socket\n\ndef write_to_network(host, port, message):\n    \"\"\"\n    Writes a message to a network connection.\n\n    Args:\n        host (str): The hostname or IP address of the server.\n        port (int): The port number of the server.\n        message (str): The message to be sent.\n\n    Returns:\n        None\n    \"\"\"\n    # Create a socket object\n    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n    try:\n        # Connect to the server\n        client_socket.connect((host, port))\n\n        # Send the message\n        client_socket.sendall(message.encode())\n\n        print(\"Message sent successfully!\")\n\n    except ConnectionRefusedError:\n        print(\"Connection refused by the server.\")\n\n    except socket.error as e:\n        print(f\"Socket error: {e}\")\n\n    finally:\n        # Close the socket\n        client_socket.close()\n\nif __name__ == \"__main__\":\n    host = \"localhost\"\n    port = 8080\n    message = \"Hello, server!\"\n\n    write_to_network(host, port, message)\n```\n\n### Explanation\n\n1. The `write_to_network` function takes three arguments: `host`, `port`, and `message`.\n2. It creates a socket object using the `socket.socket` function.\n3. It attempts to connect to the server using the `connect` method.\n4. If the connection is successful, it sends the message using the `sendall` method.\n5. If there's an error, it catches the exception and prints an error message.\n6. Finally, it closes the socket using the `close` method.\n\n### Example Use Case\n\nTo test this program, you'll need to set up a server that listens on the specified port. Here's a simple example of a server using the `socket` library:\n```python\nimport socket\n\ndef start_server(host, port):\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    server_socket.bind((host, port))\n    server_socket.listen(1)\n\n    print(\"Server started. Waiting for connections...\")\n\n    while True:\n        client_socket, address = server_socket.accept()\n        print(\"Connection established!\")\n\n        data = client_socket.recv(1024)\n        print(\"Received message:\", data.decode())\n\n        client_socket.close()\n\nif __name__ == \"__main__\":\n    host = \"localhost\"\n    port = 8080\n\n    start_server(host, port)\n```\nRun the server program first, then run the client program. The client program will send the message to the server, and the server will print the received message.",
  "timestamp": "2026-02-12T10:04:11.798263",
  "model": "RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic"
}