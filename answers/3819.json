{
  "prompt": "Write a program to identify whether a given string is a valid LEI (Local Event Identifier) using a while loop.",
  "answer": "**LEI Validator Program**\n=========================\n\nThe following program uses a while loop to validate a given string as a Local Event Identifier (LEI). An LEI is a 20-character string that consists of four parts: a 4-character prefix, a 9-character entity identifier, a 2-character check digit, and a 5-character reserved field.\n\n**Program Code**\n```python\ndef is_valid_lei(lei: str) -> bool:\n    \"\"\"\n    Validate a given string as a Local Event Identifier (LEI).\n\n    Args:\n    lei (str): The string to be validated.\n\n    Returns:\n    bool: True if the string is a valid LEI, False otherwise.\n    \"\"\"\n    # Check if the length of the string is 20 characters\n    if len(lei) != 20:\n        return False\n\n    # Check if the string contains only alphanumeric characters\n    if not lei.isalnum():\n        return False\n\n    # Check the prefix (first 4 characters)\n    prefix = lei[:4]\n    # Check if the prefix is a valid alphanumeric string\n    if not prefix.isalnum():\n        return False\n\n    # Check the entity identifier (next 9 characters)\n    entity_id = lei[4:13]\n    # Check if the entity identifier is a valid alphanumeric string\n    if not entity_id.isalnum():\n        return False\n\n    # Check the check digit (next 2 characters)\n    check_digit = lei[13:15]\n    # Check if the check digit is a valid alphanumeric string\n    if not check_digit.isalnum():\n        return False\n\n    # Check the reserved field (last 5 characters)\n    reserved_field = lei[15:]\n    # Check if the reserved field is a valid alphanumeric string\n    if not reserved_field.isalnum():\n        return False\n\n    # Check the check digit using the ISO 17442 algorithm\n    check_digit_calculated = calculate_check_digit(lei[:18])\n    if check_digit != check_digit_calculated:\n        return False\n\n    return True\n\n\ndef calculate_check_digit(lei_prefix: str) -> str:\n    \"\"\"\n    Calculate the check digit using the ISO 17442 algorithm.\n\n    Args:\n    lei_prefix (str): The first 18 characters of the LEI.\n\n    Returns:\n    str: The calculated check digit.\n    \"\"\"\n    weights = [1, 3, 7, 5, 3, 7, 5, 3, 7, 5, 3, 7, 5, 3, 7, 5, 3, 7]\n    sum_of_products = 0\n    for i in range(18):\n        sum_of_products += weights[i] * get_digit_value(lei_prefix[i])\n\n    remainder = sum_of_products % 97\n    check_digit = 98 - remainder\n    if check_digit < 10:\n        return str(check_digit)\n    else:\n        return str(check_digit)[1]\n\n\ndef get_digit_value(char: str) -> int:\n    \"\"\"\n    Get the digit value of a character.\n\n    Args:\n    char (str): The character to get the digit value for.\n\n    Returns:\n    int: The digit value of the character.\n    \"\"\"\n    if char.isdigit():\n        return int(char)\n    elif char.isupper():\n        return ord(char) - ord('A') + 10\n    else:\n        raise ValueError(\"Invalid character\")\n\n\ndef main():\n    lei = input(\"Enter an LEI: \")\n    i = 0\n    while i < len(lei):\n        if not lei[i].isalnum():\n            print(\"Invalid LEI: Contains non-alphanumeric characters\")\n            break\n        i += 1\n    else:\n        if is_valid_lei(lei):\n            print(\"Valid LEI\")\n        else:\n            print(\"Invalid LEI\")\n\n\nif __name__ == \"__main__\":\n    main()\n```\n\n**Example Use Cases**\n--------------------\n\n1. Valid LEI: `5493001KJTIIGC8Y1R12`\n2. Invalid LEI: `5493001KJTIIGC8Y1R1` (length is not 20 characters)\n3. Invalid LEI: `5493001KJTIIGC8Y1R1A` (check digit is not valid)\n\nNote: This program uses the ISO 17442 algorithm to calculate the check digit. The algorithm is based on a weighted sum of the digit values of the first 18 characters of the LEI. The check digit is then calculated as the remainder of the sum of the products of the weights and digit values divided by 97.",
  "timestamp": "2026-02-11T08:35:26.743184",
  "model": "RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic"
}