## Exercise
Write a program that uses a for loop to encrypt and decrypt a message using a Caesar Cipher with a given shift.

## Reference Solution
```python
def caesar_cipher(message, shift, mode):
    """
    Encrypt or decrypt a message using a Caesar Cipher with a given shift.

    Args:
    - message (str): The message to be encrypted or decrypted.
    - shift (int): The shift value for the Caesar Cipher.
    - mode (str): 'e' for encryption, 'd' for decryption.

    Returns:
    - result (str): The encrypted or decrypted message.
    """
    alphabet = 'abcdefghijklmnopqrstuvwxyz'
    result = ''

    for char in message:
        if char.isalpha():
            index = alphabet.index(char.lower())
            if mode == 'e':
                new_index = (index + shift) % 26
            elif mode == 'd':
                new_index = (index - shift) % 26
            else:
                raise ValueError("Invalid mode. Use 'e' for encryption or 'd' for decryption.")
            
            if char.isupper():
                result += alphabet[new_index].upper()
            else:
                result += alphabet[new_index]
        else:
            result += char

    return result

# Test the function
message = "Hello, World!"
shift = 3

encrypted = caesar_cipher(message, shift, 'e')
print(f"Encrypted: {encrypted}")

decrypted = caesar_cipher(encrypted, shift, 'd')
print(f"Decrypted: {decrypted}")
```

## Generated Output
```
Encrypted: Khoor, Zruog!
Decrypted: Hello, World!
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
