## Exercise
Find the longest substring with at most k distinct characters in a given string.

## Reference Solution
```python
def longest_substring_with_at_most_k_distinct(s: str, k: int) -> str:
    """
    Find the longest substring with at most k distinct characters in a given string.

    Args:
    s (str): The input string.
    k (int): The maximum number of distinct characters allowed.

    Returns:
    str: The longest substring with at most k distinct characters.
    """
    if k == 0 or not s:
        return ""

    left = 0
    max_length = 0
    max_substring = ""
    freq_map = {}

    for right in range(len(s)):
        # Increment the frequency of the character at right in freq_map
        freq_map[s[right]] = freq_map.get(s[right], 0) + 1

        # Shrink the window if the number of distinct characters exceeds k
        while len(freq_map) > k:
            freq_map[s[left]] -= 1
            if freq_map[s[left]] == 0:
                del freq_map[s[left]]
            left += 1

        # Update max_length and max_substring if the length of the current window is greater than max_length
        if right - left + 1 > max_length:
            max_length = right - left + 1
            max_substring = s[left:right + 1]

    return max_substring

# Example usage
s = "abcba"
k = 2
print(longest_substring_with_at_most_k_distinct(s, k))  # Output: "bcb"
```

## Generated Output
```
bcb
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
