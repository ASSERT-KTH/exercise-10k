## Exercise
Write a program that takes an array and a function as input and applies the function to each element in the array, returning a new array with the results.

## Reference Solution
```python
#include <stdio.h>
#include <stdlib.h>

// Function pointer type declaration
typedef int (*func)(int);

// Function to apply a function to each element in an array
int* applyToEach(int* arr, int size, func f) {
    // Create a new array to store the results
    int* result = (int*)malloc(size * sizeof(int));

    // Apply the function to each element in the array
    for (int i = 0; i < size; i++) {
        result[i] = f(arr[i]);
    }

    // Return the new array
    return result;
}

// Example function that squares its input
int square(int n) {
    return n * n;
}

// Main function
int main() {
    // Create an array
    int arr[] = {1, 2, 3, 4, 5};

    // Determine the size of the array
    int size = sizeof(arr) / sizeof(arr[0]);

    // Apply the square function to each element in the array
    int* result = applyToEach(arr, size, square);

    // Print the results
    for (int i = 0; i < size; i++) {
        printf("%d ", result[i]);
    }
    printf("\n");

    // Free the memory allocated for the result array
    free(result);

    return 0;
}
```

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
