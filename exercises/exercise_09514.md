## Exercise
Create a program that uses a dictionary to store student records. The dictionary should have student names as keys and another dictionary with 'age' and 'grade' as values. The program should allow users to add, remove, and search for student records.

## Reference Solution
```python
class StudentRecords:
    def __init__(self):
        """
        Initializes an empty dictionary to store student records.
        """
        self.student_records = {}

    def add_student(self, name, age, grade):
        """
        Adds a new student record to the dictionary.

        Args:
        name (str): The name of the student.
        age (int): The age of the student.
        grade (str): The grade of the student.
        """
        if name in self.student_records:
            print("Student already exists. Please update the existing record.")
        else:
            self.student_records[name] = {'age': age, 'grade': grade}
            print(f"Student {name} added successfully.")

    def remove_student(self, name):
        """
        Removes a student record from the dictionary.

        Args:
        name (str): The name of the student.
        """
        if name in self.student_records:
            del self.student_records[name]
            print(f"Student {name} removed successfully.")
        else:
            print(f"Student {name} not found.")

    def search_student(self, name):
        """
        Searches for a student record in the dictionary.

        Args:
        name (str): The name of the student.

        Returns:
        dict or None: The student record if found, otherwise None.
        """
        return self.student_records.get(name)

    def update_student(self, name, age=None, grade=None):
        """
        Updates an existing student record in the dictionary.

        Args:
        name (str): The name of the student.
        age (int, optional): The new age of the student. Defaults to None.
        grade (str, optional): The new grade of the student. Defaults to None.
        """
        if name in self.student_records:
            if age:
                self.student_records[name]['age'] = age
            if grade:
                self.student_records[name]['grade'] = grade
            print(f"Student {name} updated successfully.")
        else:
            print(f"Student {name} not found.")

    def display_records(self):
        """
        Displays all student records in the dictionary.
        """
        for name, record in self.student_records.items():
            print(f"Name: {name}, Age: {record['age']}, Grade: {record['grade']}")


def main():
    student_records = StudentRecords()

    while True:
        print("\nStudent Records Menu:")
        print("1. Add Student")
        print("2. Remove Student")
        print("3. Search Student")
        print("4. Update Student")
        print("5. Display Records")
        print("6. Exit")

        choice = input("Enter your choice: ")

        if choice == "1":
            name = input("Enter student name: ")
            age = int(input("Enter student age: "))
            grade = input("Enter student grade: ")
            student_records.add_student(name, age, grade)
        elif choice == "2":
            name = input("Enter student name: ")
            student_records.remove_student(name)
        elif choice == "3":
            name = input("Enter student name: ")
            record = student_records.search_student(name)
            if record:
                print(f"Name: {name}, Age: {record['age']}, Grade: {record['grade']}")
            else:
                print(f"Student {name} not found.")
        elif choice == "4":
            name = input("Enter student name: ")
            age = input("Enter new age (press enter to skip): ")
            grade = input("Enter new grade (press enter to skip): ")
            age = int(age) if age else None
            grade = grade if grade else None
            student_records.update_student(name, age, grade)
        elif choice == "5":
            student_records.display_records()
        elif choice == "6":
            break
        else:
            print("Invalid choice. Please try again.")


if __name__ == "__main__":
    main()
```

## Generated Output
```
Student Records Menu:
1. Add Student
2. Remove Student
3. Search Student
4. Update Student
5. Display Records
6. Exit
Enter your choice: Invalid choice. Please try again.

Student Records Menu:
1. Add Student
2. Remove Student
3. Search Student
4. Update Student
5. Display Records
6. Exit
Enter your choice: 
Traceback (most recent call last):
  File "/tmp/tmpacl0hw6k.py", line 119, in <module>
    main()
  File "/tmp/tmpacl0hw6k.py", line 86, in main
    choice = input("Enter your choice: ")
EOFError: EOF when reading a line
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
