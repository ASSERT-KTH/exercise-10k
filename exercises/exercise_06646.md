## Exercise
Create a function that uses continuous deployment to automate its deployment and rollout

## Reference Solution
```python
import os
import requests
import subprocess

def deploy_and_rollout():
    """
    Automates the deployment and rollout of a web application using continuous deployment.
    """
    # Define environment variables
    GITHUB_TOKEN = os.environ['GITHUB_TOKEN']
    DOCKER_USERNAME = os.environ['DOCKER_USERNAME']
    DOCKER_PASSWORD = os.environ['DOCKER_PASSWORD']
    REPO_NAME = os.environ['REPO_NAME']
    BRANCH_NAME = os.environ['BRANCH_NAME']

    # Login to Docker Hub
    subprocess.run(['docker', 'login', '-u', DOCKER_USERNAME, '-p', DOCKER_PASSWORD])

    # Build and push Docker image
    subprocess.run(['docker', 'build', '-t', f'{DOCKER_USERNAME}/{REPO_NAME}:latest', '.'])
    subprocess.run(['docker', 'push', f'{DOCKER_USERNAME}/{REPO_NAME}:latest'])

    # Trigger GitHub Actions workflow
    workflow_url = f'https://api.github.com/repos/{REPO_NAME}/actions/workflows/deploy.yml/dispatches'
    headers = {
        'Authorization': f'token {GITHUB_TOKEN}',
        'Content-Type': 'application/json'
    }
    payload = {
        'ref': BRANCH_NAME,
        'inputs': {
            'docker_image': f'{DOCKER_USERNAME}/{REPO_NAME}:latest'
        }
    }
    response = requests.post(workflow_url, headers=headers, json=payload)

    # Check if workflow was triggered successfully
    if response.status_code == 204:
        print('Deployment and rollout triggered successfully!')
    else:
        print('Error triggering deployment and rollout:', response.text)

# Example usage
if __name__ == '__main__':
    deploy_and_rollout()
```

```python
name: Deploy

on:
  workflow_dispatch:
    inputs:
      docker_image:
        description: 'Docker image to deploy'
        required: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Deploy to production
        run: |
          docker pull ${{ github.event.inputs.docker_image }}
          docker run -d -p 80:80 ${{ github.event.inputs.docker_image }}
```

```python
python deploy_and_rollout.py
```

## Generated Output
```
Traceback (most recent call last):
  File "/tmp/tmpdw3ctqnr.py", line 45, in <module>
    deploy_and_rollout()
  File "/tmp/tmpdw3ctqnr.py", line 10, in deploy_and_rollout
    GITHUB_TOKEN = os.environ['GITHUB_TOKEN']
  File "/opt/conda/lib/python3.10/os.py", line 680, in __getitem__
    raise KeyError(key) from None
KeyError: 'GITHUB_TOKEN'
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
