## Exercise
Find the kth largest element in an array.

## Reference Solution
```python
import random

def kth_largest_element(arr, k):
    """
    Find the kth largest element in an array.

    Args:
        arr (list): Input array.
        k (int): Index of the desired largest element (1-indexed).

    Returns:
        int: The kth largest element in the array.
    """
    if k < 1 or k > len(arr):
        raise ValueError("k is out of bounds")

    return quickselect(arr, 0, len(arr) - 1, len(arr) - k)

def quickselect(arr, low, high, k):
    """
    QuickSelect algorithm to find the kth smallest element.

    Args:
        arr (list): Input array.
        low (int): Lower bound of the array.
        high (int): Upper bound of the array.
        k (int): Index of the desired smallest element (0-indexed).

    Returns:
        int: The kth smallest element in the array.
    """
    if low == high:
        return arr[low]

    # Select a random pivot index
    pivot_index = random.randint(low, high)

    # Swap the pivot element with the last element
    arr[pivot_index], arr[high] = arr[high], arr[pivot_index]

    # Partition the array
    i = low
    for j in range(low, high):
        if arr[j] <= arr[high]:
            arr[i], arr[j] = arr[j], arr[i]
            i += 1

    # Swap the pivot element with the element at the pivot index
    arr[i], arr[high] = arr[high], arr[i]

    # Recursively search for the kth smallest element
    if k == i:
        return arr[k]
    elif k < i:
        return quickselect(arr, low, i - 1, k)
    else:
        return quickselect(arr, i + 1, high, k)

# Example usage:
arr = [3, 2, 1, 5, 6, 4]
k = 2
result = kth_largest_element(arr, k)
print(f"The {k}th largest element is: {result}")
```

## Generated Output
```
The 2th largest element is: 5
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
