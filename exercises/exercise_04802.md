## Exercise
Optimize the bubble sort algorithm to sort an array of integers in ascending order. The function should take in an array of integers as input and return the sorted array.

## Reference Solution
```python
def bubble_sort(arr):
    """
    This function sorts an array of integers in ascending order using the optimized bubble sort algorithm.

    Args:
        arr (list): A list of integers.

    Returns:
        list: The sorted list of integers.
    """

    # Create a copy of the input array to avoid modifying it in-place
    arr = arr.copy()

    # Get the length of the array
    n = len(arr)

    # Iterate over the array from the first element to the second last element
    for i in range(n - 1):
        
        # Initialize a flag to check if any swaps were made in the current iteration
        swapped = False
        
        # Iterate over the array from the first element to the (n - i - 1)th element
        for j in range(n - i - 1):
            
            # If the current element is greater than the next element, swap them
            if arr[j] > arr[j + 1]:
                # Swap the elements
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                
                # Set the flag to True
                swapped = True
        
        # If no swaps were made in the current iteration, the array is already sorted
        if not swapped:
            break
    
    # Return the sorted array
    return arr

# Example usage:
arr = [64, 34, 25, 12, 22, 11, 90]
print("Original array:", arr)
print("Sorted array:", bubble_sort(arr))
```

## Generated Output
```
Original array: [64, 34, 25, 12, 22, 11, 90]
Sorted array: [11, 12, 22, 25, 34, 64, 90]
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
