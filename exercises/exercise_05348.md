## Exercise
Write a function that takes a list and a key function as input, and returns a dictionary where the keys are the values returned by the key function, and the values are lists of elements that have the corresponding key.

## Reference Solution
```python
def group_by_key(lst, key_func):
    """
    This function groups a list of elements based on a key function.
    
    Args:
        lst (list): The list of elements to be grouped.
        key_func (function): A function that takes an element and returns its key.
    
    Returns:
        dict: A dictionary where the keys are the values returned by the key function, 
              and the values are lists of elements that have the corresponding key.
    """

    # Initialize an empty dictionary to store the grouped elements
    result = {}

    # Iterate over each element in the list
    for element in lst:
        # Calculate the key for the current element using the key function
        key = key_func(element)
        
        # If the key is not already in the dictionary, add it with an empty list as its value
        if key not in result:
            # This is done to avoid KeyError when trying to append to a non-existent key
            result[key] = []
        
        # Append the current element to the list of its corresponding key
        result[key].append(element)
    
    # Return the dictionary with the grouped elements
    return result
```

## Generated Output
```

```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
