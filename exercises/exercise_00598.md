## Exercise
Write a program that takes an array of numbers as input and returns the maximum product of a subarray.

## Reference Solution
```python
def max_product_subarray(nums):
    """
    This function calculates the maximum product of a subarray within the given array.

    Args:
    nums (list): A list of integers.

    Returns:
    int: The maximum product of a subarray.
    """
    if not nums:
        return 0

    max_product = min_product = result = nums[0]

    for i in range(1, len(nums)):
        # If the current number is negative, we need to swap max_product and min_product
        # because multiplying a negative number swaps their order
        if nums[i] < 0:
            max_product, min_product = min_product, max_product

        # Update max_product and min_product
        max_product = max(nums[i], max_product * nums[i])
        min_product = min(nums[i], min_product * nums[i])

        # Update the result
        result = max(result, max_product)

    return result


# Example usage
print(max_product_subarray([2, 3, -2, 4]))  # Output: 6
print(max_product_subarray([-2, 0, -1]))  # Output: 0
print(max_product_subarray([1]))  # Output: 1
print(max_product_subarray([-2, 3, -4]))  # Output: 24
```

## Generated Output
```
6
0
1
24
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
