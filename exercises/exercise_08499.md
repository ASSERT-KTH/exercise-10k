## Exercise
You are given a dictionary where keys are student names and values are dictionaries with keys 'math' and 'science' representing their grades in these subjects. You need to calculate the average grade for each subject across all students and find the student with the highest average grade.

## Reference Solution
```python
def calculate_average_grades(students):
    """
    Calculate the average grade for each subject and find the student with the highest average grade.

    Args:
        students (dict): A dictionary where keys are student names and values are dictionaries with keys 'math' and 'science'.

    Returns:
        tuple: A tuple containing the average math grade, average science grade, and the student with the highest average grade.
    """

    # Initialize variables to store the sum of grades for each subject and the total number of students
    math_sum = 0
    science_sum = 0
    total_students = 0

    # Initialize variables to store the student with the highest average grade
    top_student = None
    top_average = 0

    # Iterate over each student in the dictionary
    for student, grades in students.items():
        # Add the student's grades to the respective subject sums
        math_sum += grades['math']
        science_sum += grades['science']

        # Increment the total number of students
        total_students += 1

        # Calculate the student's average grade
        student_average = (grades['math'] + grades['science']) / 2

        # Check if the student has the highest average grade so far
        if student_average > top_average:
            top_student = student
            top_average = student_average

    # Calculate the average grade for each subject
    average_math = math_sum / total_students
    average_science = science_sum / total_students

    return average_math, average_science, top_student


# Example usage:
students = {
    'John': {'math': 85, 'science': 90},
    'Alice': {'math': 90, 'science': 85},
    'Bob': {'math': 80, 'science': 95}
}

average_math, average_science, top_student = calculate_average_grades(students)

print(f"Average Math Grade: {average_math:.2f}")
print(f"Average Science Grade: {average_science:.2f}")
print(f"Student with the Highest Average Grade: {top_student}")
```

## Generated Output
```
Average Math Grade: 85.00
Average Science Grade: 90.00
Student with the Highest Average Grade: John
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
