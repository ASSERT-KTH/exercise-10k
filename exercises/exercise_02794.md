## Exercise
Write a program that applies a given function to each element of a given array and returns a new array with the results.

## Reference Solution
```python
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Function pointer type
typedef int (*func_t)(int);

// Function to apply a function to each element of an array
int* apply(int* arr, int size, func_t func, int* new_size) {
    // Allocate memory for the new array
    int* new_arr = (int*)malloc(size * sizeof(int));
    
    // Apply the function to each element of the original array
    for (int i = 0; i < size; i++) {
        new_arr[i] = (*func)(arr[i]);
    }
    
    // Set the new size
    *new_size = size;
    
    return new_arr;
}

// Example function to multiply an integer by 2
int double_int(int x) {
    return x * 2;
}

int main() {
    // Original array
    int arr[] = {1, 2, 3, 4, 5};
    int size = sizeof(arr) / sizeof(arr[0]);
    
    // Apply the function to the array
    int new_size;
    int* new_arr = apply(arr, size, double_int, &new_size);
    
    // Print the result
    printf("New array: ");
    for (int i = 0; i < new_size; i++) {
        printf("%d ", new_arr[i]);
    }
    printf("\n");
    
    // Free the allocated memory
    free(new_arr);
    
    return 0;
}
```

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
