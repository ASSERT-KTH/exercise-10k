## Exercise
You are given a dictionary containing student information, where each key is a student's name and the corresponding value is another dictionary with keys 'age' and 'grades' (a list of grades). Write a function to calculate the average grade for each student and return a new dictionary with the student's name as the key and their average grade as the value. If a student has no grades, their average grade should be 0.

## Reference Solution
```python
def calculate_average_grades(students):
    """
    This function calculates the average grade for each student in a given dictionary.
    
    Args:
        students (dict): A dictionary containing student information, where each key is a student's name and the corresponding value is another dictionary with keys 'age' and 'grades' (a list of grades).
    
    Returns:
        dict: A new dictionary with the student's name as the key and their average grade as the value.
    """

    # Initialize an empty dictionary to store the average grades for each student
    average_grades = {}

    # Iterate over each student in the given dictionary
    for student, info in students.items():
        # Check if the student has any grades
        if 'grades' in info and info['grades']:
            # Calculate the sum of all grades for the current student
            total_grades = sum(info['grades'])
            
            # Calculate the average grade by dividing the sum of grades by the number of grades
            average_grade = total_grades / len(info['grades'])
        else:
            # If the student has no grades, set their average grade to 0
            average_grade = 0
        
        # Store the average grade in the average_grades dictionary
        average_grades[student] = average_grade
    
    # Return the dictionary containing the average grades for each student
    return average_grades
```

## Generated Output
```

```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
