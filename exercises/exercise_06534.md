## Exercise
Write a function that calculates the average rating of a list of restaurants.

## Reference Solution
```python
def calculate_average_rating(restaurants):
    """
    Calculate the average rating of a list of restaurants.

    Args:
    restaurants (list): A list of dictionaries, each containing 'name' and 'rating' keys.

    Returns:
    float: The average rating of all restaurants in the list.

    Raises:
    ValueError: If the input list is empty or if a restaurant's rating is not between 1 and 5.
    """

    # Check if the input list is empty
    if not restaurants:
        raise ValueError("Input list cannot be empty")

    # Initialize sum of ratings
    total_rating = 0

    # Iterate over each restaurant in the list
    for restaurant in restaurants:
        # Check if the restaurant's rating is valid
        if not 1 <= restaurant['rating'] <= 5:
            raise ValueError("Restaurant rating must be between 1 and 5")

        # Add the restaurant's rating to the total
        total_rating += restaurant['rating']

    # Calculate the average rating
    average_rating = total_rating / len(restaurants)

    return average_rating


# Example usage:
if __name__ == "__main__":
    restaurants = [
        {'name': 'Restaurant A', 'rating': 4},
        {'name': 'Restaurant B', 'rating': 3},
        {'name': 'Restaurant C', 'rating': 5}
    ]

    try:
        average = calculate_average_rating(restaurants)
        print(f"Average rating: {average:.2f}")
    except ValueError as e:
        print(f"Error: {e}")
```

## Generated Output
```
Execution failed: 'list' object has no attribute 'encode'
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
