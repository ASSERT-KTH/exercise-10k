## Exercise
Write a function that implements a Caesar cipher, which shifts each letter in the input string by a specified number of positions.

## Reference Solution
```python
def caesar_cipher(text: str, shift: int, direction: str = 'encrypt') -> str:
    """
    Implements a Caesar cipher to shift each letter in the input string by a specified number of positions.

    Args:
    - text (str): The input string to be encrypted or decrypted.
    - shift (int): The number of positions to shift each letter.
    - direction (str, optional): The direction of the shift. Defaults to 'encrypt'. Use 'decrypt' to reverse the shift.

    Returns:
    - str: The encrypted or decrypted string.
    """
    alphabet = 'abcdefghijklmnopqrstuvwxyz'
    result = ''

    for char in text:
        if char.isalpha():
            # Find the position of the character in the alphabet
            position = alphabet.index(char.lower())
            
            # Apply the shift
            if direction == 'encrypt':
                new_position = (position + shift) % 26
            elif direction == 'decrypt':
                new_position = (position - shift) % 26
            
            # Convert the new position back to a character
            new_char = alphabet[new_position]
            
            # Preserve the original case
            if char.isupper():
                new_char = new_char.upper()
            
            result += new_char
        else:
            # Non-alphabetic characters are not shifted
            result += char
    
    return result

# Example usage:
if __name__ == '__main__':
    text = "Hello, World!"
    shift = 3
    
    encrypted = caesar_cipher(text, shift)
    decrypted = caesar_cipher(encrypted, shift, direction='decrypt')
    
    print(f"Original text: {text}")
    print(f"Encrypted text: {encrypted}")
    print(f"Decrypted text: {decrypted}")
```

## Generated Output
```
Execution failed: 'list' object has no attribute 'encode'
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
