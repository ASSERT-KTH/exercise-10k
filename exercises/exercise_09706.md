## Exercise
Write a function to retrieve the middle element of an array. If the array has an even number of elements, return the average of the two middle elements.

## Reference Solution
```python
def get_middle_element(array):
    """
    Retrieves the middle element of an array. If the array has an even number of elements, 
    returns the average of the two middle elements.

    Args:
        array (list): The input array.

    Returns:
        The middle element or the average of the two middle elements.
    """
    n = len(array)
    
    # Check if the array is empty
    if n == 0:
        raise ValueError("Array is empty")
    
    # Calculate the middle index
    middle_index = n // 2
    
    # If the array has an odd number of elements, return the middle element
    if n % 2 != 0:
        return array[middle_index]
    
    # If the array has an even number of elements, return the average of the two middle elements
    else:
        return (array[middle_index - 1] + array[middle_index]) / 2

# Example usage
def main():
    # Test with an array having an odd number of elements
    array1 = [1, 2, 3, 4, 5]
    print(get_middle_element(array1))  # Output: 3
    
    # Test with an array having an even number of elements
    array2 = [1, 2, 3, 4]
    print(get_middle_element(array2))  # Output: 2.5
    
    # Test with an empty array
    try:
        array3 = []
        print(get_middle_element(array3))
    except ValueError as e:
        print(e)  # Output: Array is empty

if __name__ == "__main__":
    main()
```

## Generated Output
```
3
2.5
Array is empty
```

generated by python 3.10.13

solution generated by RedHatAI/Llama-3.3-70B-Instruct-FP8-dynamic
